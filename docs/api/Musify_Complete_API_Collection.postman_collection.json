{
  "info": {
    "_postman_id": "musify-complete-api-2025",
    "name": "Musify API - REST & SOAP Complete Collection",
    "description": "Colecci칩n completa de la API Musify que incluye endpoints REST y SOAP/XML. Esta colecci칩n demuestra la implementaci칩n de patrones arquitect칩nicos para disponibilidad, rendimiento, seguridad y modificabilidad.",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json",
    "version": {
      "major": 3,
      "minor": 0,
      "patch": 0
    }
  },
  "auth": {
    "type": "bearer",
    "bearer": [
      {
        "key": "token",
        "value": "{{jwt_token}}",
        "type": "string"
      }
    ]
  },
  "item": [
    {
      "name": "游댏 Autenticaci칩n (REST)",
      "description": "Endpoints de autenticaci칩n y registro de usuarios usando JWT",
      "item": [
        {
          "name": "Registro de Usuario",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"username\": \"usuario_demo\",\n    \"email\": \"demo@musify.com\",\n    \"password\": \"password123\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/auth/register",
              "host": ["{{baseUrl}}"],
              "path": ["api", "auth", "register"]
            },
            "description": "Registra un nuevo usuario. Retorna JWT token autom치ticamente."
          },
          "response": []
        },
        {
          "name": "Login Usuario",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 200) {",
                  "    var jsonData = pm.response.json();",
                  "    pm.environment.set(\"jwt_token\", jsonData.accessToken);",
                  "    console.log(\"JWT Token guardado: \" + jsonData.accessToken.substring(0, 20) + \"...\");",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"username\": \"demo\",\n    \"password\": \"demo123\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/auth/login",
              "host": ["{{baseUrl}}"],
              "path": ["api", "auth", "login"]
            },
            "description": "Autentica usuario y obtiene JWT token. El token se guarda autom치ticamente en la variable de entorno."
          },
          "response": []
        },
        {
          "name": "Login Admin",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 200) {",
                  "    var jsonData = pm.response.json();",
                  "    pm.environment.set(\"jwt_token\", jsonData.accessToken);",
                  "    console.log(\"JWT Admin Token guardado\");",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"username\": \"admin\",\n    \"password\": \"admin123\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/auth/login",
              "host": ["{{baseUrl}}"],
              "path": ["api", "auth", "login"]
            },
            "description": "Login con credenciales de administrador"
          },
          "response": []
        }
      ]
    },
    {
      "name": "游꿧 M칰sica - REST API",
      "description": "Endpoints REST para b칰squeda y obtenci칩n de m칰sica desde Spotify",
      "item": [
        {
          "name": "Buscar M칰sica",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{jwt_token}}",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/music/spotify/search?q=Billie Eilish&limit=10",
              "host": ["{{baseUrl}}"],
              "path": ["music", "spotify", "search"],
              "query": [
                {
                  "key": "q",
                  "value": "Billie Eilish",
                  "description": "T칠rmino de b칰squeda (artista, canci칩n, 치lbum)"
                },
                {
                  "key": "limit",
                  "value": "10",
                  "description": "N칰mero m치ximo de resultados (1-50)"
                }
              ]
            },
            "description": "Busca canciones en Spotify por t칠rmino de b칰squeda. Soporta artistas, canciones, 치lbumes."
          },
          "response": []
        },
        {
          "name": "M칰sica Aleatoria",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{jwt_token}}",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/music/spotify/random?limit=12",
              "host": ["{{baseUrl}}"],
              "path": ["music", "spotify", "random"],
              "query": [
                {
                  "key": "limit",
                  "value": "12",
                  "description": "N칰mero de canciones aleatorias (1-50)"
                }
              ]
            },
            "description": "Obtiene canciones aleatorias de Spotify para descubrimiento de m칰sica."
          },
          "response": []
        },
        {
          "name": "Obtener Track por ID",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{jwt_token}}",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/music/spotify/track/3n3Ppam7vgaVa1iaRUc9Lp",
              "host": ["{{baseUrl}}"],
              "path": ["music", "spotify", "track", "3n3Ppam7vgaVa1iaRUc9Lp"]
            },
            "description": "Obtiene informaci칩n detallada de una canci칩n espec칤fica por su Spotify ID."
          },
          "response": []
        }
      ]
    },
    {
      "name": "游꿚 Reproducci칩n (REST)",
      "description": "Endpoints para gesti칩n de reproducci칩n de m칰sica",
      "item": [
        {
          "name": "Iniciar Reproducci칩n",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{jwt_token}}",
                "type": "text"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"trackId\": \"3n3Ppam7vgaVa1iaRUc9Lp\",\n    \"source\": \"spotify\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/playback/start",
              "host": ["{{baseUrl}}"],
              "path": ["playback", "start"]
            },
            "description": "Inicia la reproducci칩n de una canci칩n. Retorna la URL del stream."
          },
          "response": []
        },
        {
          "name": "Pausar Reproducci칩n",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{jwt_token}}",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/playback/pause",
              "host": ["{{baseUrl}}"],
              "path": ["playback", "pause"]
            },
            "description": "Pausa la reproducci칩n actual del usuario."
          },
          "response": []
        },
        {
          "name": "Reanudar Reproducci칩n",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{jwt_token}}",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/playback/resume",
              "host": ["{{baseUrl}}"],
              "path": ["playback", "resume"]
            },
            "description": "Reanuda la reproducci칩n pausada."
          },
          "response": []
        },
        {
          "name": "Detener Reproducci칩n",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{jwt_token}}",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/playback/stop",
              "host": ["{{baseUrl}}"],
              "path": ["playback", "stop"]
            },
            "description": "Detiene completamente la reproducci칩n."
          },
          "response": []
        },
        {
          "name": "Estado de Reproducci칩n",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{jwt_token}}",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/playback/status",
              "host": ["{{baseUrl}}"],
              "path": ["playback", "status"]
            },
            "description": "Obtiene el estado actual de reproducci칩n del usuario."
          },
          "response": []
        }
      ]
    },
    {
      "name": "游니 SOAP/XML Endpoints",
      "description": "Endpoints SOAP que aceptan y retornan XML para b칰squeda y descubrimiento de m칰sica. Implementaci칩n complementaria a la API REST.",
      "item": [
        {
          "name": "SOAP - Buscar M칰sica",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/xml",
                "type": "text"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<searchMusicRequest xmlns=\"http://tfu.com/backend/soap/music\">\n    <query>Billie Eilish</query>\n    <limit>5</limit>\n</searchMusicRequest>",
              "options": {
                "raw": {
                  "language": "xml"
                }
              }
            },
            "url": {
              "raw": "{{baseUrl}}/soap/music/search",
              "host": ["{{baseUrl}}"],
              "path": ["soap", "music", "search"]
            },
            "description": "Endpoint SOAP para b칰squeda de m칰sica. Acepta XML con query y limit, retorna XML con lista de canciones.\n\nNamespace: http://tfu.com/backend/soap/music\n\nPar치metros:\n- query: T칠rmino de b칰squeda (obligatorio)\n- limit: N칰mero de resultados (1-50, opcional, default: 10)"
          },
          "response": [
            {
              "name": "B칰squeda Exitosa",
              "originalRequest": {
                "method": "POST",
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/xml",
                    "type": "text"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<searchMusicRequest xmlns=\"http://tfu.com/backend/soap/music\">\n    <query>Billie Eilish</query>\n    <limit>3</limit>\n</searchMusicRequest>",
                  "options": {
                    "raw": {
                      "language": "xml"
                    }
                  }
                },
                "url": {
                  "raw": "{{baseUrl}}/soap/music/search",
                  "host": ["{{baseUrl}}"],
                  "path": ["soap", "music", "search"]
                }
              },
              "status": "OK",
              "code": 200,
              "_postman_previewlanguage": "xml",
              "header": [
                {
                  "key": "Content-Type",
                  "value": "application/xml"
                }
              ],
              "body": "<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<searchMusicResponse xmlns=\"http://tfu.com/backend/soap/music\">\n    <query>Billie Eilish</query>\n    <totalResults>3</totalResults>\n    <tracks>\n        <track>\n            <id>6Qb7YsAVEy8LvCAdGHpsCG</id>\n            <name>bad guy</name>\n            <artist>Billie Eilish</artist>\n            <album>WHEN WE ALL FALL ASLEEP, WHERE DO WE GO?</album>\n            <duration>194080</duration>\n            <explicit>false</explicit>\n            <previewUrl>https://p.scdn.co/mp3-preview/...</previewUrl>\n        </track>\n        <!-- m치s tracks... -->\n    </tracks>\n</searchMusicResponse>"
            }
          ]
        },
        {
          "name": "SOAP - Buscar por G칠nero",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/xml",
                "type": "text"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<searchMusicRequest xmlns=\"http://tfu.com/backend/soap/music\">\n    <query>rock</query>\n    <limit>10</limit>\n</searchMusicRequest>",
              "options": {
                "raw": {
                  "language": "xml"
                }
              }
            },
            "url": {
              "raw": "{{baseUrl}}/soap/music/search",
              "host": ["{{baseUrl}}"],
              "path": ["soap", "music", "search"]
            },
            "description": "B칰squeda SOAP por g칠nero musical (rock, pop, jazz, etc.)"
          },
          "response": []
        },
        {
          "name": "SOAP - Buscar Canci칩n Espec칤fica",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/xml",
                "type": "text"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<searchMusicRequest xmlns=\"http://tfu.com/backend/soap/music\">\n    <query>Shape of You Ed Sheeran</query>\n    <limit>3</limit>\n</searchMusicRequest>",
              "options": {
                "raw": {
                  "language": "xml"
                }
              }
            },
            "url": {
              "raw": "{{baseUrl}}/soap/music/search",
              "host": ["{{baseUrl}}"],
              "path": ["soap", "music", "search"]
            },
            "description": "B칰squeda SOAP de una canci칩n espec칤fica con artista"
          },
          "response": []
        },
        {
          "name": "SOAP - M칰sica Aleatoria",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/xml",
                "type": "text"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<getRandomMusicRequest xmlns=\"http://tfu.com/backend/soap/music\">\n    <limit>8</limit>\n</getRandomMusicRequest>",
              "options": {
                "raw": {
                  "language": "xml"
                }
              }
            },
            "url": {
              "raw": "{{baseUrl}}/soap/music/random",
              "host": ["{{baseUrl}}"],
              "path": ["soap", "music", "random"]
            },
            "description": "Endpoint SOAP para obtener m칰sica aleatoria. Retorna XML con canciones aleatorias de Spotify.\n\nNamespace: http://tfu.com/backend/soap/music\n\nPar치metros:\n- limit: N칰mero de canciones (1-50, opcional, default: 10)"
          },
          "response": [
            {
              "name": "M칰sica Aleatoria Exitosa",
              "originalRequest": {
                "method": "POST",
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/xml",
                    "type": "text"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<getRandomMusicRequest xmlns=\"http://tfu.com/backend/soap/music\">\n    <limit>5</limit>\n</getRandomMusicRequest>",
                  "options": {
                    "raw": {
                      "language": "xml"
                    }
                  }
                },
                "url": {
                  "raw": "{{baseUrl}}/soap/music/random",
                  "host": ["{{baseUrl}}"],
                  "path": ["soap", "music", "random"]
                }
              },
              "status": "OK",
              "code": 200,
              "_postman_previewlanguage": "xml",
              "header": [
                {
                  "key": "Content-Type",
                  "value": "application/xml"
                }
              ],
              "body": "<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<getRandomMusicResponse xmlns=\"http://tfu.com/backend/soap/music\">\n    <totalResults>5</totalResults>\n    <tracks>\n        <track>\n            <id>spotify_id_123</id>\n            <name>Random Song</name>\n            <artist>Random Artist</artist>\n            <album>Random Album</album>\n            <duration>180000</duration>\n            <explicit>false</explicit>\n            <previewUrl>https://p.scdn.co/mp3-preview/...</previewUrl>\n        </track>\n        <!-- m치s tracks... -->\n    </tracks>\n</getRandomMusicResponse>"
            }
          ]
        },
        {
          "name": "SOAP - Validaci칩n Query Vac칤o (Error)",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/xml",
                "type": "text"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<searchMusicRequest xmlns=\"http://tfu.com/backend/soap/music\">\n    <query></query>\n    <limit>5</limit>\n</searchMusicRequest>",
              "options": {
                "raw": {
                  "language": "xml"
                }
              }
            },
            "url": {
              "raw": "{{baseUrl}}/soap/music/search",
              "host": ["{{baseUrl}}"],
              "path": ["soap", "music", "search"]
            },
            "description": "Prueba de validaci칩n: query vac칤o debe retornar error 400"
          },
          "response": [
            {
              "name": "Error - Query Obligatorio",
              "originalRequest": {
                "method": "POST",
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/xml",
                    "type": "text"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<searchMusicRequest xmlns=\"http://tfu.com/backend/soap/music\">\n    <query></query>\n    <limit>5</limit>\n</searchMusicRequest>",
                  "options": {
                    "raw": {
                      "language": "xml"
                    }
                  }
                },
                "url": {
                  "raw": "{{baseUrl}}/soap/music/search",
                  "host": ["{{baseUrl}}"],
                  "path": ["soap", "music", "search"]
                }
              },
              "status": "Bad Request",
              "code": 400,
              "_postman_previewlanguage": "xml",
              "header": [
                {
                  "key": "Content-Type",
                  "value": "application/xml"
                }
              ],
              "body": "<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<errorResponse xmlns=\"http://tfu.com/backend/soap/music\">\n    <code>400</code>\n    <message>El par치metro 'query' es obligatorio</message>\n</errorResponse>"
            }
          ]
        },
        {
          "name": "SOAP - Validaci칩n L칤mite Fuera de Rango (Error)",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/xml",
                "type": "text"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<getRandomMusicRequest xmlns=\"http://tfu.com/backend/soap/music\">\n    <limit>100</limit>\n</getRandomMusicRequest>",
              "options": {
                "raw": {
                  "language": "xml"
                }
              }
            },
            "url": {
              "raw": "{{baseUrl}}/soap/music/random",
              "host": ["{{baseUrl}}"],
              "path": ["soap", "music", "random"]
            },
            "description": "Prueba de validaci칩n: l칤mite > 50 debe retornar error 400"
          },
          "response": [
            {
              "name": "Error - L칤mite Fuera de Rango",
              "originalRequest": {
                "method": "POST",
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/xml",
                    "type": "text"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<getRandomMusicRequest xmlns=\"http://tfu.com/backend/soap/music\">\n    <limit>100</limit>\n</getRandomMusicRequest>",
                  "options": {
                    "raw": {
                      "language": "xml"
                    }
                  }
                },
                "url": {
                  "raw": "{{baseUrl}}/soap/music/random",
                  "host": ["{{baseUrl}}"],
                  "path": ["soap", "music", "random"]
                }
              },
              "status": "Bad Request",
              "code": 400,
              "_postman_previewlanguage": "xml",
              "header": [
                {
                  "key": "Content-Type",
                  "value": "application/xml"
                }
              ],
              "body": "<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<errorResponse xmlns=\"http://tfu.com/backend/soap/music\">\n    <code>400</code>\n    <message>El l칤mite debe estar entre 1 y 50</message>\n</errorResponse>"
            }
          ]
        }
      ]
    },
    {
      "name": "游낀 Monitoreo y Salud",
      "description": "Endpoints de Spring Boot Actuator para monitoreo de salud y m칠tricas",
      "item": [
        {
          "name": "Health Check",
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/actuator/health",
              "host": ["{{baseUrl}}"],
              "path": ["actuator", "health"]
            },
            "description": "Verifica el estado de salud del backend. Usado por NGINX para health checks pasivos."
          },
          "response": []
        },
        {
          "name": "Info Aplicaci칩n",
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/actuator/info",
              "host": ["{{baseUrl}}"],
              "path": ["actuator", "info"]
            },
            "description": "Informaci칩n general de la aplicaci칩n"
          },
          "response": []
        }
      ]
    }
  ],
  "variable": [
    {
      "key": "baseUrl",
      "value": "http://localhost:8080",
      "type": "string"
    },
    {
      "key": "jwt_token",
      "value": "",
      "type": "string"
    }
  ]
}
