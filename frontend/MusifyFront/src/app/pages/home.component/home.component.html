<body class="page">
  <header class="header-top">
    <app-logo></app-logo>

    <div class="header-controls">
      <!-- Search Mode Toggle -->
      <div class="search-mode-toggle">
        <button (click)="toggleSearchMode()" class="toggle-btn" [class.active]="!showEnhancedSearch">
          ğŸ” BÃºsqueda Simple
        </button>
        <button (click)="toggleSearchMode()" class="toggle-btn" [class.active]="showEnhancedSearch">
          ğŸ¯ BÃºsqueda Avanzada
        </button>
      </div>

      <!-- Simple Search -->
      <div *ngIf="!showEnhancedSearch" class="simple-search">
        <search-bar (searchResults)="searchHome($event)"></search-bar>
      </div>
    </div>
  </header>

  <!-- Enhanced Search (Full Width) -->
  <div *ngIf="showEnhancedSearch" class="enhanced-search-container">
    <app-enhanced-search></app-enhanced-search>
  </div>

  <!-- Main Content (Only show when not in enhanced search mode) -->
  <main class="content" *ngIf="!showEnhancedSearch">
    <section class="welcome-section">
      <h1>ğŸµ Descubre mÃºsica increÃ­ble</h1>
      <p>Explora las mejores canciones, artistas y Ã¡lbumes del momento</p>
    </section>

    <section class="random-tracks-section">
      <h2>ğŸ² Recomendaciones para ti</h2>
      <div class="row">
        @for (tracks of randomSongs; track tracks.id) {
        <mat-card class="music-card">
          <img mat-card-image [src]="tracks.imageUrl" (click)="playTrack(tracks.name, tracks.artists)"
            alt="{{ tracks.name }}" class="track-image" />
          <mat-card-content>
            <h3 class="track-name">{{ tracks.name }}</h3>
            <p class="track-info">{{ tracks.artists }}</p>
            <button (click)="playTrack(tracks.name, tracks.artists)" class="play-button">
              â–¶ï¸ Reproducir
            </button>
          </mat-card-content>
        </mat-card>
        }
      </div>
    </section>
  </main>

  <!-- Music Player (Always visible) -->
  <footer class="player-section">
    <app-music-player></app-music-player>

    <!-- Fallback Audio Player (for compatibility) -->
    <div class="fallback-player" *ngIf="audioURL">
      <audio class="reproductor" [src]="audioURL" controls autoplay></audio>
    </div>
  </footer>

  <!-- Development Info Component -->
  <app-dev-info></app-dev-info>
</body>